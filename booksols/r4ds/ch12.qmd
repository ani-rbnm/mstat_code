---
title: R 4 DS, ch12, logical vectors
format: html
---

* use of `is.na()`


```{r}
library(tidyverse)
library(nycflights13)
```
* when dep_time is NA

```{r}
flights |>
  filter(is.na(dep_time))
```
* keeping NA values at the top when sorting

```{r}
flights |>
  filter(month == 1, day == 1) |>
  arrange(desc(is.na(dep_time)), desc(dep_time))
  arrange(is.na(dep_time), desc(dep_time))

```
* conditional mean


```{r}
flights |>
  group_by(year, month, day) |>
  summarize(
    avg_delay = mean(arr_delay[arr_delay > 0], na.rm = TRUE), 
    avg_ahead = mean(arr_delay[arr_delay < 0], na.rm = TRUE),
    n = n(),
    .groups = "drop"
  )
```
* `case_when`

```{r}
x <- c(-3:3, NA)
case_when(
  x == 0 ~ "0",
  x < 0 ~ "-ve",
  x > 0 ~ "+ve",
  is.na(x) ~ "???",
  TRUE ~ "Unknown"
)
```
